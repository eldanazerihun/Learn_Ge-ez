<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ge‘ez Syllabary Interactive</title>
  <style>
    body {
      font-family: "Noto Sans Ethiopic", "Abyssinica SIL", sans-serif;
      background-color: #f4f8fb;
      color: #111;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
    }
    h1 {
      text-align: center;
      color: #004080;
    }
    table {
      width: 95%;
      margin: 20px auto;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #bbb;
      padding: 10px;
      text-align: center;
      font-size: 24px;
      transition: background-color 0.3s ease;
      cursor: pointer;
    }
    th {
      background-color: #004080;
      color: white;
    }
    tr:hover {
      background-color: #e0f0ff;
    }
    .popup {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background-color: #004080;
      color: #fff;
      padding: 12px 18px;
      border-radius: 8px;
      font-size: 18px;
      display: none;
      z-index: 1000;
    }
    .toggle-btn {
      margin: 20px auto;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    button {
      padding: 10px 16px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background-color: #004080;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0059b3;
    }
    .dark {
      background-color: #121212;
      color: #e0e0e0;
    }
    .dark th {
      background-color: #222;
      color: #fff;
    }
    .dark tr:hover {
      background-color: #333;
    }
  </style>
</head>
<body>

  <h1>Ge‘ez / ግዕዝ Syllabary Chart</h1>

  <div class="toggle-btn">
    <button onclick="toggleDarkMode()">🌓 Toggle Dark Mode</button>
    <button onclick="startQuiz()">🧠 Quiz Me!</button>
  </div>

  <table id="geezTable">
    <thead>
      <tr>
        <th></th>
        <th title="ä as in 'father'">ä</th>
        <th title="u as in 'boot'">u</th>
        <th title="i as in 'machine'">i</th>
        <th title="a as in 'cat'">a</th>
        <th title="ē as in 'they'">ē</th>
        <th title="ə as in 'sofa'">ə</th>
        <th title="o as in 'go'">o</th>
      </tr>
    </thead>
    <tbody>
      <tr><th>h</th><td>ሀ</td><td>ሁ</td><td>ሂ</td><td>ሃ</td><td>ሄ</td><td>ህ</td><td>ሆ</td></tr>
      <tr><th>l</th><td>ለ</td><td>ሉ</td><td>ሊ</td><td>ላ</td><td>ሌ</td><td>ል</td><td>ሎ</td></tr>
      <tr><th>ḥ</th><td>ሐ</td><td>ሑ</td><td>ሒ</td><td>ሓ</td><td>ሔ</td><td>ሕ</td><td>ሖ</td></tr>
      <tr><th>m</th><td>መ</td><td>ሙ</td><td>ሚ</td><td>ማ</td><td>ሜ</td><td>ም</td><td>ሞ</td></tr>
      <tr><th>s</th><td>ሰ</td><td>ሱ</td><td>ሲ</td><td>ሳ</td><td>ሴ</td><td>ስ</td><td>ሶ</td></tr>
      <tr><th>š</th><td>ሸ</td><td>ሹ</td><td>ሺ</td><td>ሻ</td><td>ሼ</td><td>ሽ</td><td>ሾ</td></tr>
      <tr><th>r</th><td>ረ</td><td>ሩ</td><td>ሪ</td><td>ራ</td><td>ሬ</td><td>ር</td><td>ሮ</td></tr>
      <tr><th>q</th><td>ቀ</td><td>ቁ</td><td>ቂ</td><td>ቃ</td><td>ቄ</td><td>ቅ</td><td>ቆ</td></tr>
      <tr><th>b</th><td>በ</td><td>ቡ</td><td>ቢ</td><td>ባ</td><td>ቤ</td><td>ብ</td><td>ቦ</td></tr>
      <tr><th>t</th><td>ተ</td><td>ቱ</td><td>ቲ</td><td>ታ</td><td>ቴ</td><td>ት</td><td>ቶ</td></tr>
      <tr><th>č</th><td>ቸ</td><td>ቹ</td><td>ቺ</td><td>ቻ</td><td>ቼ</td><td>ች</td><td>ቾ</td></tr>
      <tr><th>n</th><td>ነ</td><td>ኑ</td><td>ኒ</td><td>ና</td><td>ኔ</td><td>ን</td><td>ኖ</td></tr>
      <tr><th>k</th><td>ከ</td><td>ኩ</td><td>ኪ</td><td>ካ</td><td>ኬ</td><td>ክ</td><td>ኮ</td></tr>
      <tr><th>w</th><td>ወ</td><td>ዉ</td><td>ዊ</td><td>ዋ</td><td>ዌ</td><td>ው</td><td>ዎ</td></tr>
      <tr><th>ʾ</th><td>ዐ</td><td>ዑ</td><td>ዒ</td><td>ዓ</td><td>ዔ</td><td>ዕ</td><td>ዖ</td></tr>
      <tr><th>y</th><td>የ</td><td>ዩ</td><td>ዪ</td><td>ያ</td><td>ዬ</td><td>ይ</td><td>ዮ</td></tr>
    </tbody>
  </table>

  <div class="popup" id="popup"></div>

  <script>
    const ipaHeaders = ["ä", "u", "i", "a", "ē", "ə", "o"];
    const table = document.getElementById("geezTable");
    const popup = document.getElementById("popup");
    const body = document.body;

    table.addEventListener("click", function (event) {
      const cell = event.target;
      const row = cell.parentElement;
      const cellIndex = cell.cellIndex;

      if (cell.tagName === "TD" && cellIndex > 0) {
        const ipa = ipaHeaders[cellIndex - 1];
        const char = cell.innerText;

        popup.innerText = `IPA: [${ipa}] — '${char}'`;
        popup.style.display = "block";

        const utter = new SpeechSynthesisUtterance(char);
        utter.lang = "am-ET";
        speechSynthesis.speak(utter);

        setTimeout(() => {
          popup.style.display = "none";
        }, 3000);
      }
    });

    function toggleDarkMode() {
      body.classList.toggle("dark");
    }

    function startQuiz() {
      const allRows = Array.from(table.getElementsByTagName("tr")).slice(1);
      const randomRow = allRows[Math.floor(Math.random() * allRows.length)];
      const cells = Array.from(randomRow.getElementsByTagName("td"));
      const randIndex = Math.floor(Math.random() * cells.length);
      const char = cells[randIndex].innerText;
      const answer = ipaHeaders[randIndex];

      const userGuess = prompt(`What is the IPA vowel for '${char}'? (ex: ä, u, i, a, ē, ə, o)`);
      if (userGuess && userGuess.trim().toLowerCase() === answer) {
        alert("✅ Correct!");
      } else {
        alert(`❌ Incorrect. The correct answer is [${answer}]`);
      }
    }
  </script>
</body>
</html>
